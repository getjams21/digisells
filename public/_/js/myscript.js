$(function(){$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="_token"]').attr("content")}})}),$(document).on("change",".btn-file :file",function(){var e=$(this),t=e.get(0).files?e.get(0).files.length:1,i=e.val().replace(/\\/g,"/").replace(/.*\//,"");e.trigger("fileselect",[t,i])}),$.fn.watchProduct=function(e,t,i){$(this).addClass("hidden"),$("#unWatch"+t).removeClass("hidden"),$.post("/watchProduct",{userID:e,prodID:t,type:i},function(){})},$.fn.unwatchProduct=function(e,t){$(this).addClass("hidden"),$("#watch"+t).removeClass("hidden"),$.post("/unwatchProduct",{userID:e,prodID:t},function(){})},$(document).ready(function(){function e(e){$(".error-msg").text(e),$(".error-panel").animate({opacity:"1",width:"100%"},300)}function t(){$(".error-msg").text(""),$(".error-panel").animate({opacity:"0",width:"0%"},300)}function i(){if(""!=$("#MinimumPrice").val()){var t=parseFloat($("#MinimumPrice").val());if(0!=t){var i=.05*t,n=t+i;$("#bid-price").text("$"+n.toFixed(2)),$(".customized-bid").hide(),$(".next-bid-info").show()}else $(".next-bid-info").hide(),e("Minimum Price must NOT be 0")}else $(".next-bid-info").hide(),e("Minimum Price must NOT be EMPTY!")}function n(i){var n=$("#MinimumPrice").val();if(t(),""!=n)if(0!=n){var a=parseFloat(i);n=parseFloat(n);var o=parseFloat(a+n);$("#customBid").text("$"+o.toFixed(2)),$(".next-bid-info").hide(),$(".customized-bid").show()}else e("Minimum Price must NOT be 0");else $(".customized-bid").hide(),e("Minimum Price must NOT be EMPTY")}function a(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}function o(){var e=document.getElementById("password"),t=e.value,i=document.getElementById("password_confirmation"),n=document.getElementById("confirmMessage"),a=document.getElementById("confirmMessage2");t.length>=6&&t.length<=20?(n.innerHTML=" ",e.value==i.value?(e.style.backgroundColor=B,i.style.backgroundColor=I,a.style.color=I,a.innerHTML="Passwords Match!"):(e.style.backgroundColor=P,i.style.backgroundColor=P,a.style.color=M,a.innerHTML="Passwords Does Not Match!")):(i.style.backgroundColor=P,a.innerHTML=" ",e.style.backgroundColor=P,n.style.color=M,n.innerHTML="Passwords Must be 6 to 20 characters only!")}function s(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#default").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function l(e,t,i){$.get(""+i+"/"+e,{val:e},function(e){e&&($.each(e,function(e,i){var n,a=Math.round(100*i.minimumPrice)/100,o=i.incrementation,s="http://digisells.com/place-bid",l="Place Bid",d="GET";if("1"==t&&(s="http://digisells.com/place-max-bid",l="Place Maximum Bid",d="GET"),"0"==o){var r=parseFloat(.05*a);n=Math.round(100*parseFloat(r+a))/100}else n=Math.round(100*(parseFloat(a)+parseFloat(o)))/100;$(".bid-body").find("div").remove().end(),$(".bid-body").append('				  <div class="modal-header">			        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>			        <center><h4 class="modal-title">'+i.auctionName+'</h4></center>			      </div>				  	<div class="modal-body bid-body">				  	<div class="well well-bid" style="background-color: #7CBFF8;">						<center><div class="price">							<span><h2>Current Bid: &nbsp;$'+a+'</h2></span>						</div>						<span>Enter Bid <font color="#992D31"><b>$'+n+'</b></font> or higher</span>						<form method="'+d+'" action="'+s+'" accept-charset="UTF-8">						<div class="input-group txtbox-s prop-s">		                    <span class="input-group-addon">$</span>		                    <input class="form-control span3" placeholder="Bid Price" id="bidPrice" required="required" name="bidPrice" type="text">       \n	                		<input type="hidden" name="auctionID" value="'+i.id+'">	                		<input type="hidden" name="minPrice" value="'+n+'">	                		<input type="hidden" name="amount" value="'+a+'">	                	</div>	                	<div class="btn-group">						<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>						<button type="submit" class="btn btn-primary btnSubmit"><span class="glyphicon glyphicon-bell">&nbsp;</span>'+l+"</button>						</div>						</form>					</div>					</div>				  	")}),$("#bidPrice").focus(),$("#bid-modal").modal("show"))})}$(".btn-file :file").on("fileselect",function(e,t,i){var n=$(this).parents(".input-group").find(":text"),a=t>1?t+" files selected":i;n.length?n.val(a):a&&alert(a)}),$("#print").click(function(){$("#Printable").printThis({debug:!1,importCSS:!0,printContainer:!0,loadCSS:"public/_/css/mystyle.css",pageTitle:"Digisells Invoice",removeInline:!1,printDelay:333,header:null,formValues:!0})}),$("#SubmitButton").prop("disabled",!0);var d=new Date,r=d.getDate(),c=d.getMonth()+1,u=d.getFullYear(),p=d.getHours(),h=d.getMinutes(),m=d.getSeconds();10>r&&(r="0"+r),10>c&&(c="0"+c),d=c+"-"+r+"-"+u;var f=p+":"+h+":"+m;$(".carousel").carousel(),$("#startDate, #grp-startDate").click(function(){$(this).data("date",d),$("#grp-startDate").val(d),$("#startDate").val(d),$(this).datepicker("show")}),$("#endDate, #grp-endDate").click(function(){$(this).val(""),$(this).data("date",d),$("#grp-endDate").val(d),$("#endDate").val(d),$(this).datepicker("show")}),$("#endDate").focus(function(){var e=$(this).val(),t=e+" "+f;$(this).val(t)}),$("#endDate").focusout(function(){var e=$(this).val(),t=e+" "+f;$(this).val(t)}),$("#endDate").change(function(){var e=$(this).val(),t=e+" "+f;$(this).val(t)}),$("#startDate").change(function(){var i=$(this).val();d>i?($("#SubmitButton").prop("disabled",!0),e("Invalid Date! Starting Date must not be a PAST date.")):($("#SubmitButton").prop("disabled",!1),t())}),$("#endDate").change(function(){var i=$(this).val();d+" "+f>=i?($("#SubmitButton").prop("disabled",!0),e("Invalid Date! End Date must not be a PAST or a CURRENT date.")):($("#SubmitButton").prop("disabled",!1),t())}),$("#standard").click(function(){$(this).addClass("active"),$("#customized").removeClass("active")}),$("#customized").click(function(){$(this).addClass("active"),$("#standard").removeClass("active")}),$("#standard").hover(function(){$(this).popover("show")},function(){$(this).popover("hide")}),$("#customized").hover(function(){$(this).popover("show")},function(){$(this).popover("hide")}),$("#affiliation").hover(function(){$(this).popover("show")},function(){$(this).popover("hide")}),$("#customized").click(function(){var e=parseFloat($("#bidIncrement").val());n(e)}),$("#standard").click(function(){i()}),$("#MinimumPrice").keyup(function(a){if(46==a.keyCode||8==a.keyCode||9==a.keyCode||27==a.keyCode||13==a.keyCode||65==a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39)return t(),void 0;if((a.shiftKey||(a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))&&(e("Only Numbers are accepted"),a.preventDefault()),$("#standard").hasClass("active"))i();else{var o=parseFloat($("#bidIncrement").val());n(o)}}),$("#bidIncrement").keyup(function(){var e;e=""==$("#bidIncrement").val()?.01:$("#bidIncrement").val(),n(e)}),$("#bidIncrement").change(function(){if(""==$("#bidIncrement").val()||0==$("#bidIncrement").val()){var e=.01;$("#bidIncrement").val(e),e=$("#bidIncrement").val()}else e=$("#bidIncrement").val();n(e)}),$("#affiliation").click(function(){$(".validateAffOption").hide(),$(".affiliation").show(),$(this).hide()}),$("#disableAffiliation").click(function(){$(".validateAffOption").show(),$(".affiliation").hide(),$("#affiliation").show()}),$("#fileName").attr("disabled",!0),$("#fileUpload").click(function(){this.value=null}),$("#fileUpload").change(function(){var i=$(this).val(),n=$(this).get(0).files[0].size,a=$(this).data("max-size");if(a>=n)switch(t(),i.substring(i.lastIndexOf(".")+1).toLowerCase()){case"gif":case"jpg":case"png":case"bmp":$("#SubmitButton").prop("disabled",!1),$("#submitSelling").prop("disabled",!1),t();break;default:$("#submitSelling").prop("disabled",!0),$("#SubmitButton").prop("disabled",!0),e("Invalid File Format! Please select an Image file (.png, .jpg, .gif or .bmp).")}else e("File size limit exceeded! Please select or resize the Image to at least 5MB.")}),$("#copyrightFileUpload").click(function(){this.value=null}),$("#copyrightFileUpload").change(function(){var i=$(this).val();switch(i.substring(i.lastIndexOf(".")+1).toLowerCase()){case"zip":case"rar":$("#SubmitButton").prop("disabled",!1),$("#submitSelling").prop("disabled",!1),t();break;default:$("#SubmitButton").prop("disabled",!0),$("#submitSelling").prop("disabled",!0),e("Invalid File Format! Please compress your file first (.zip or .rar).")}}),$("#productUpload").hover(function(){$(this).popover("show")},function(){$(this).popover("hide")}),$("#downloadLink").hover(function(){$(this).popover("show")},function(){$(this).popover("hide")}),$("#productUpload").click(function(){$(this).addClass("active"),$("#downloadLink").removeClass("active"),$(".downloadLink").hide(),$(".uploadProduct").show()}),$("#downloadLink").click(function(){$(this).addClass("active"),$("#productUpload").removeClass("active"),$(".uploadProduct").hide(),$(".downloadLink").show()}),$("#download-Link").change(function(){var i=$(this).val();"http://"!=i.substr(0,7)?($("#SubmitButton").prop("disabled",!0),e("Invalid URL! Download link must start with http://")):($("#SubmitButton").prop("disabled",!0),t())}),$("#selectCategory").change(function(){var e=$(this).val();$.post("fetchSubCategory",{val:e},function(e){$("#subCategory").find("option").remove().end(),$.each(e,function(e,t){$("#subCategory").append($("<option/>").val(e).text(t))})})}),$("#qty").keydown(function(e){a(e)}),$("#affiliatePercentage").keydown(function(e){a(e)}),$("#bidIncrement").keydown(function(e){a(e)}),$("#MinimumPrice").keydown(function(e){a(e)}),$("#buyoutPrice").keydown(function(e){a(e)}),$("[name='amount']").keydown(function(e){a(e)}),$("[name='amount']").change(function(){var e=parseFloat(this.value);$(this).val(e.toFixed(2)),Number.isNaN(e)&&$(this).val(1..toFixed(2)),0==e&&$(this).val(1..toFixed(2))}),$("#cvv2").keydown(function(e){a(e)}),$("#cardNumber").keydown(function(e){a(e)}),$("#productPrice,#discountPrice,#affiliatePercentage").keydown(function(e){a(e)}),$(".step-1,.step-2,.step-3").animate({width:"100%",opacity:1},800),$("#btn-step-1,#btn-step-2-back").click(function(){return parent.history.back(),!1});var v=$("#progressbar"),b=$("#statustxt"),g=$("#SubmitButton"),y=$("#fileupload"),w=$(".saving"),k=$(".saved"),C="0%";$(y).ajaxForm({beforeSend:function(){g.attr("disabled",""),b.empty(),v.css({width:C}),b.css("color","#000")},uploadProgress:function(e,t,i,n){v.css({width:n+"%"}),b.css({html:n+"%"}),n>50&&b.css("color","#fff")},complete:function(){b.css({html:"100%"}),w.css({display:"none"}),k.css({display:"block"}),g.removeAttr("disabled"),setTimeout(function(){window.location="http://digisells.com/sales-page/default"},1500)}});var v=$("#progressbar"),b=$("#statustxt"),g=$("#SubmitButton"),y=$("#directSelling"),w=$(".saving"),k=$(".saved"),C="0%";$(y).ajaxForm({beforeSend:function(){g.attr("disabled",""),b.empty(),v.css({width:C}),b.css("color","#000")},uploadProgress:function(e,t,i,n){v.css({width:n+"%"}),b.css({html:n+"%"}),n>50&&b.css("color","#fff")},complete:function(){b.css({html:"100%"}),w.css({display:"none"}),k.css({display:"block"}),g.removeAttr("disabled"),setTimeout(function(){window.location="http://digisells.com/sales-page-default"},1500)}});var D=document.title;document.getElementsByTagName("body")[0].id=D,"Login"==D?($(".nav-dropdown").hide(),$("#Login a:contains('Login')").parent().addClass("active")):$("ul.nav li.dropdown").hover(function(){$(".dropdown-menu",this).fadeIn()},function(){$(".dropdown-menu",this).fadeOut("fast")}),$("#"+D+" a:contains('"+D+"')").parent().addClass("active"),$("#Edit a:contains('Profile')").parent().addClass("active"),$("#"+D+" a:contains("+D+")").parent().addClass("active"),$(".sidehead ul:contains("+D+")").removeClass("collapse");var I="#66cc66",P="#FFE6BB",B="#C3FDB8",M="red";$("#password_confirmation").keyup(function(){o()}),$("#password").keyup(function(){o()}),$("#username").on("blur",function(e){e.preventDefault();var t=$("#username").val();$.post("searchUser",{username:t},function(e){var i=document.getElementById("username"),n=document.getElementById("searchMessage"),a=t.length;0==e?2>=a?(i.style.backgroundColor=P,n.style.color=M,n.innerHTML="Must consist 3 or more characters!"):(i.style.backgroundColor=B,n.style.color=I,n.innerHTML="Username Available"):1==e&&(i.style.backgroundColor=P,n.style.color=M,n.innerHTML="Username Taken!")})}),$("#email").on("blur",function(e){e.preventDefault();var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,i=document.getElementById("email"),n=document.getElementById("searchEmail"),a=$("#email").val();return t.test(i.value)?($.post("searchEmail",{email:a},function(e){0==e?(i.style.backgroundColor=B,n.style.color=I,n.innerHTML="Email Available"):(i.style.backgroundColor=P,n.style.color=M,n.innerHTML="Email Taken!")}),void 0):(i.style.backgroundColor=P,n.style.color=M,n.innerHTML="Invalid Email Address!",a.focus,!1)}),$(".clickableRow").click(function(){window.document.location=$(this).attr("href")}),$("#sidebar-wrapper").hover(function(e){e.preventDefault(),$("#wrapper").addClass("toggled")},function(){$("#wrapper").removeClass("toggled")}),$("#userImage").change(function(){s(this)}),$(".sidehead").click(function(){$(this).children("ul").first().stop(!0,!0).slideToggle(500)}),$("#submitSelling").prop("disabled",!0),$("#submitSelling").click(function(){$(directSelling).submit(function(){var t=$("#fileUpload").val(),i=$("#productFile").val(),n=$("#download-Link").val();""!=t&&(""!=i||""!=n?$(".bs-example-modal-sm").modal("show"):e("Please provide the Product item or its download link"))})}),$("#SubmitButton").click(function(){$(fileupload).submit(function(){var t=$("#startDate").val(),i=$("#endDate").val(),n=$("#fileUpload").val(),a=$("#copyrightFileUpload").val(),o=$("#productFile").val(),s=$("#download-Link").val();""!=t&&""!=i&&""!=n&&""!=a&&(""!=o||""!=s?$(".bs-example-modal-sm").modal("show"):e("Please provide the Product item or its download link"))})}),$(".watchUser").on("click",function(e){e.preventDefault();var t=$(this).val();$(this).addClass("hidden"),$(".unwatchUser").removeClass("hidden"),$.post("/watchUser",{id:t},function(){})}),$(".unwatchUser").on("click",function(e){e.preventDefault();var t=$(this).val();$(this).addClass("hidden"),$(".watchUser").removeClass("hidden"),$.post("/unwatchUser",{id:t},function(){})}),$(".unread").one("mouseenter",function(e){e.preventDefault();var t=$(this).children(".notifID").text();$(this).removeClass("unread"),$(this).children(".readStatus").text("Read"),$.post("/readNotif",{id:t},function(e){$("#unreadNotif").text(e)})}),$("#paypalemail").on("blur",function(e){e.preventDefault();var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,i=document.getElementById("paypalemail"),n=document.getElementById("paypalerror"),a=$("#paypalemail").val();return t.test(i.value)?(i.style.backgroundColor=B,n.style.color=B,$("#paypalerror").hide(),a.focus,void 0):(i.style.backgroundColor=P,n.style.color=M,n.innerHTML="Invalid Email Address!",$("#paypalerror").show(),a.focus,!1)}),$(".bid").click(function(){var e=$(this).val(),t=0,i="/placing-bid";l(e,t,i)}),$(".maxBid").click(function(){var e=$(this).val(),t=1,i="/placing-bid";l(e,t,i)}),$(".show-maxBid").click(function(){var e=$(this).val(),t=1,i="../placing-bid";l(e,t,i)}),$(".load-more").click(function(){$("#loading-img").show(),setTimeout(function(){$("div.lists").show(),$.post("load-more-auction",{},function(e){e?($.each(e,function(e,t){var i=Math.round(100*t.minimumPrice)/100,n=Math.round(100*t.buyoutPrice)/100,a=$("#currentID").val(),o=parseInt(t.bidders-1);if(a==t.userID)var s="disabled";else var s=" ";if(a==t.highestBidder)var l="You're the current highest bidder with";else var l="Current Highest Bidder";if(1==t.watched)var d=" ",r="hidden";else var d="hidden",r=" ";$(".lists").append('				  	<div class="well listing-prop">				  		<div class="container-fluid">				  			<div class="col-md-3">				  				<div class="thumbnail shadow-default">				  					<a href="/auction-listing/'+t.id+'"><img src="../product/images/'+t.imageURL+'" class="listing-img-prop"></a>				  				</div>				  				<button class="btn btn-success"><span class="glyphicon glyphicon-check"></span>&nbsp;Buy this for <font color="#992D31"><b>$'+n+'</font></b></button>				  			</div>				  			<div class="col-md-9 with-error-msg">				  				<a href="/auction-listing/'+t.id+'"><div class="breadcrumb default-blue shadow-default"><center><h4>'+t.auctionName+"</h4></center></div></a>								<h5><b>"+l+': <font color="#992D31">$'+i+'</font>&nbsp;&nbsp;&nbsp;Number of Bidders:&nbsp;<font color="#992D31">'+o+'</font></b></h5>								<p class="desc">'+t.productDescription+'</p>								<center>								<div class="btn-group">									<button class="btn btn-primary bid" value="'+t.id+'" '+s+'><span class="glyphicon glyphicon-bell"></span>&nbsp;Bid for this</button>									<button class="btn btn-success" '+s+'><span class="glyphicon glyphicon-circle-arrow-up"></span>&nbsp;Set Auto Outbid</button>								<button id="watch'+t.productID+'"									class="btn btn-warning watchProduct '+r+'"									onclick="$(this).watchProduct('+t.userID+","+t.productID+', 1)" '+s+'>									<span class="glyphicon glyphicon-eye-open">									</span>&nbsp;Watch this</button>								<button id="unWatch'+t.productID+'" style="background-color:green; " \n									class="btn btn-success unwatchProduct '+d+' " \n									onclick="$(this).unwatchProduct('+t.userID+","+t.productID+')">									<span class="glyphicon glyphicon-ok">									</span>&nbsp;Watched </button>								</div>								</center>							</div>				  		</div>				  	</div>				  	')}),$(".desc").shorten({showChars:150,moreText:"Read More >>",lessText:"<< Less"}),$(".bid").click(function(){var e=$(this).val();l(e)}),$("#loading-img").hide()):$("div.loading").html("<center>- End of Listings -</center>")})},1500)}),$(".btn-close").click(function(){$(".error").find("div").remove().end()}),$("#btn-buy").click(function(){$(".buy-modal").modal("show")}),$(".comment").shorten({showChars:150,moreText:"Read More >>",lessText:"<< Less"})});